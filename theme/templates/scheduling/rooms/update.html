{% extends 'base.html' %}
{% block header %}Update Room: {{ room.roomCode }}{% endblock %}
{% block title %}Update Room: {{ room.roomCode }}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto mt-10 px-4">
    <div class="flex items-center justify-between mb-8">
        <div>
            <h2 class="text-3xl font-bold text-gray-800">Update Room</h2>
            <p class="text-sm text-gray-500 mt-1">Modifying settings for <span class="font-mono font-bold text-blue-600">{{ room.roomCode }}</span></p>
        </div>
        {% if room.isActive %}
        <span class="px-3 py-1 bg-green-100 text-green-700 text-xs font-bold uppercase rounded-full border border-green-200">Active</span>
        {% else %}
        <span class="px-3 py-1 bg-red-100 text-red-700 text-xs font-bold uppercase rounded-full border border-red-200">Inactive</span>
        {% endif %}
    </div>

    <div class="bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden">
        <form method="post" class="p-8 space-y-6">
            {% csrf_token %}

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-1">
                    <label for="roomCode" class="text-xs font-bold text-gray-500 uppercase tracking-wider ml-1">Room Code</label>
                    <input type="text" name="roomCode" value="{{ room.roomCode }}" id="roomCode" 
                           class="block w-full px-4 py-3 rounded-xl border-gray-200 bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm" required>
                </div>

                <div class="space-y-1">
                    <label for="building" class="text-xs font-bold text-gray-500 uppercase tracking-wider ml-1">Building</label>
                    <input type="text" name="building" value="{{ room.building }}" id="building" 
                           class="block w-full px-4 py-3 rounded-xl border-gray-200 bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm" required>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-1">
                    <label for="capacity" class="text-xs font-bold text-gray-500 uppercase tracking-wider ml-1">Student Capacity</label>
                    <input type="number" name="capacity" value="{{ room.capacity }}" id="capacity" 
                           class="block w-full px-4 py-3 rounded-xl border-gray-200 bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm" required>
                </div>

                <div class="space-y-1">
                    <label for="type" class="text-xs font-bold text-gray-500 uppercase tracking-wider ml-1">Room Type</label>
                    <select name="type" id="type" 
                            class="block w-full px-4 py-3 rounded-xl border-gray-200 bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm" required>
                        <option value="lecture" {% if room.type == 'lecture' %}selected{% endif %}>Lecture Room</option>
                        <option value="laboratory" {% if room.type == 'laboratory' %}selected{% endif %}>Laboratory</option>
                    </select>
                </div>
            </div>

            <div class="flex items-center justify-between p-4 bg-blue-50 rounded-2xl border border-blue-100">
                <div class="flex flex-col">
                    <span class="text-sm font-bold text-blue-900">Room Availability</span>
                    <span class="text-xs text-blue-700">Toggle off to temporarily exclude from the solver.</span>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" name="isActive" id="isActive" class="sr-only peer" {% if room.isActive %}checked{% endif %}>
                    <div class="w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
            </div>

            <div class="space-y-1">
                <label for="notes" class="text-xs font-bold text-gray-500 uppercase tracking-wider ml-1">Notes & Equipment</label>
                <textarea name="notes" id="notes" rows="3" 
                          class="block w-full px-4 py-3 rounded-xl border-gray-200 bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm"
                          placeholder="List specialized software or physical equipment...">{{ room.notes|default_if_none:"" }}</textarea>
            </div>

            <div class="flex items-center justify-between pt-6 mt-6 border-t border-gray-100">
                <a href="javascript:history.back()" 
                   class="flex items-center text-sm font-semibold text-gray-500 hover:text-gray-800 transition-colors">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="15 19l-7-7 7-7"/></svg>
                    Discard Changes
                </a>
                
                <button type="submit" 
                        class="px-10 py-3 bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-blue-200 hover:bg-blue-700 hover:translate-y-[-1px] active:translate-y-[0px] transition-all duration-200">
                    Update Room Details
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}